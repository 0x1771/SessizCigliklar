module.exports = "#define GLSLIFY 1\nuniform float uInverse;\nuniform float uSaturation;\nuniform float uBrightness;\nuniform float uContrast;\nuniform float uWhiteOverlay;\nuniform float uTime;\nuniform float uTimeOffset;\nuniform float uRolloverStrength;\nuniform vec2 uOffset;\nuniform float uScale;\nuniform sampler2D tDiffuse;\nuniform sampler2D tAlpha;\nvarying vec2 vUv;\n\n/* const float scale = .93; */\nconst vec4 white = vec4(1.);\nconst vec4 yellow = vec4(250./255., 235./255., 175./255., 1.);\n\n" + require('glsl-blend/overlay.glsl') + " \n\nfloat map(float value, float min1, float max1, float min2, float max2) {\n  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n}\n\nvec4 invert(vec4 color) {\n    return vec4(1.0 - color.r, 1.0 -color.g, 1.0 -color.b, 1);\n}\n\nvec4 saturation(vec3 color, float strength) {\n    float desaturation = 1. - strength;\n\tvec3 grayXfer = vec3(0.3, 0.59, 0.11);\n\tvec3 gray = vec3(dot(grayXfer, color));\n\treturn vec4(mix(color, gray, desaturation), 1.0);\n}\n\nvec4 brightnessContrast(vec3 color, float brightness, float contrast) {\n    vec3 colorContrasted = color * contrast;\n\tvec3 bright = colorContrasted + vec3(brightness, brightness, brightness);\n    return vec4(bright, 1.);\n}\n\nvoid main() {\n    vec2 vUvScaled = (vUv - 0.5) * uScale + (0.5 /* * uScale */);\n    vec4 color = texture2D(tDiffuse, vUvScaled  + uOffset );\n    if (uInverse > 0.) {\n        vec4 colorInverse = invert(color);\n        color = mix(color, colorInverse, uInverse);\n    }\n    if (uSaturation < 1.) {\n        color = saturation(color.rgb, uSaturation);\n    }\n    color = brightnessContrast(color.rgb, uBrightness, uContrast);\n\n    if (uRolloverStrength > 0.) {\n        float s1 = map(sin(uTime * uRolloverStrength * 7. + 3. + uTimeOffset), -1., 1., 0., 1.) * uRolloverStrength * .3;\n        float s2 = map(sin(uTime * 1. + uTimeOffset), -1., 1., 0., 1.) * uRolloverStrength;\n        float s = (s1 + s2) *.5 * (1. - uInverse);\n        color = vec4(blendOverlay( color.rgb, yellow.rgb, s), color.a);\n    }\n\n    // this is not alpha anymore, it just cuts a white border arounnd the image\n    vec4 alpha = texture2D(tAlpha, vUv);\n    color = color + 1. - alpha.r;\n    color = mix(color, white, uWhiteOverlay);\n    \n    gl_FragColor = vec4(color.rgb, 1. );\n}";